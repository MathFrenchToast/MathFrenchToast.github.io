<html>
<body>
<button id='butDir'>open</button>
<button id='butUsb'>list usb</button>
<div id="usb_device"><ul id="usb_list"/></div>

<script>

butDir = document.getElementById('butDir');
butUsb = document.getElementById('butUsb');

butDir.addEventListener('click', async () => {
  const dirHandle = await window.showDirectoryPicker();
  const promises = [];
  for await (const entry of dirHandle.values()) {
    if (entry.kind !== 'file') {
      continue;
    }
    promises.push(entry.getFile().then((file) => `${file.name} (${file.size})`));
  }
  console.log(await Promise.all(promises));
});

butUsb.addEventListener('click', async () => {
    navigator.usb.requestDevice({ filters: [{ vendorId: 0x091e }] })
    .then(device => {
        divUsb = document.getElementById("usb_list");
        divUsb.innerHTML += "<li>" + device.productName + " " + device.manufacturerName 
    })
    .catch(error => { console.error(error); });
});

</script>
</body>
</html>

